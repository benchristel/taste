(()=>{var Q=Object.defineProperty;var X=(t,n)=>{for(var e in n)Q(t,e,{get:n[e],enumerable:!0})};var C=(t,n,e)=>new Promise((o,i)=>{var u=r=>{try{h(e.next(r))}catch(s){i(s)}},f=r=>{try{h(e.throw(r))}catch(s){i(s)}},h=r=>r.done?o(r.value):Promise.resolve(r.value).then(u,f);h((e=e.apply(t,n)).next())});var I={};X(I,{createSuite:()=>A,curry:()=>c,debug:()=>D,equals:()=>d,expect:()=>Z,formatTestResultsAsText:()=>U,getAllTests:()=>jt,is:()=>z,not:()=>K,reportsFailure:()=>W,runTests:()=>B,test:()=>Ot,trimMargin:()=>j,which:()=>N});function B(t){return C(this,null,function*(){let n=[];for(let e of t){let o=yield tt(e.fn),i=F.map(u=>({type:"debug",args:u}));F.length=0,n.push({test:e,error:o,instrumentLog:i})}return{results:n}})}function tt(t){let n;try{let e=t();if(e instanceof Promise)return new Promise(o=>{e.then(()=>o()).catch(o)})}catch(e){n=e}return Promise.resolve(n)}var F=[];function D(...t){F.push(t)}var Et=Symbol(),a=Symbol(),l=Symbol();function L(t){switch(t.length){case 2:return k(t);case 3:return nt(t);default:return et(t)}}function k(t){function n(e,o){switch(arguments.length){case 1:return S(n,[e],t.bind(null,e));default:return t(e,o)}}return w(t,n)}function nt(t){function n(e,o,i){switch(arguments.length){case 1:return S(n,[e],k(t.bind(null,e)));case 2:return S(n,[e,o],t.bind(null,e,o));default:return t(e,o,i)}}return w(t,n)}function et(t){function n(...e){return e.length<t.length?S(n,e,n.bind(null,...e)):t(...e)}return w(t,n)}function w(t,n){return n.displayName=M(t),n[a]=()=>[],n[l]=n,n}function S(t,n,e){return e.displayName=M(t),e[a]=()=>rt(t).concat(n),e[l]=t[l],e}function M(t){var n;return(n=t.displayName)!=null?n:t.name}function rt(t){var n;return(n=t[a]())!=null?n:[]}function c(t,n){let e=L(t);return e.displayName=n||T(t),e}function y(t){return t[l]}function m(t){var n,e;return(e=(n=t[a])==null?void 0:n.call(t))!=null?e:[]}function T(t){return t.displayName||t.name}function q(t){return t[t.length-1]}function E(t){return t[0]}var N=c(function(t,n){return t(n)},"which"),d=c(function(t,n){var e,o;if(ot(t))return t(n);if(Array.isArray(t)&&Array.isArray(n))return t.length===n.length&&t.every((i,u)=>d(t[u],n[u]));if(t instanceof Function&&n instanceof Function)return y(t)&&y(t)===y(n)?d(m(t),m(n)):t===n;if(t instanceof Date&&n instanceof Date)return t.toISOString()===n.toISOString();if(t instanceof Set&&n instanceof Set)return t.size===n.size&&[...t.values()].every(i=>n.has(i));if(t instanceof Error&&n instanceof Error)return t.message===n.message&&t.__proto__.constructor===n.__proto__.constructor;if(R(t)&&R(n)){let i=Object.keys(t),u=Object.keys(n);return i.length===u.length&&i.every(f=>d(t[f],n[f]))&&((e=t.__proto__)==null?void 0:e.constructor)===((o=n.__proto__)==null?void 0:o.constructor)}return t===n},"equals"),z=c(function(t,n){return t===n},"is"),K=c(function(t,n,...e){return!t(n,...e)},"not"),v=c(function(t){return/^\s*$/.test(t)},"isBlank");function R(t){return!!t&&typeof t=="object"}function ot(t){return t instanceof Function&&y(t)===N&&m(t).length===1}function $(t){return T(t)||"<function>"}function b(t){let n=[];return e(t);function e(r){var s;if(r===null)return"null";if(typeof r=="function")return o(r,i);if(typeof r=="string")return P(r);if(typeof r=="bigint")return`${r}n`;if(Array.isArray(r))return o(r,u);if(r instanceof Date)return`Date(${r.toISOString().replace("T"," ").replace("Z"," UTC")})`;if(r instanceof RegExp)return String(r);if(r instanceof Error)return`${V(r)}(${P(r.message)})`;if(r instanceof Set)return o(r,h);if(typeof r=="object"){let p=(s=r==null?void 0:r.__proto__)==null?void 0:s.constructor;return p===Object||!p?o(r,f):`${V(r)} ${o(r,f)}`}return String(r)}function o(r,s){if(n.indexOf(r)>-1)return"<circular reference>";n.push(r);let p=s(r);return n.pop(),p}function i(r){let s=m(r).map(e),p=$(r);return s.length?g(p+"(",s,",",")"):p}function u(r){return g("[",r.map(e),",","]")}function f(r){let s=Object.entries(r).map(([p,J])=>`${it(p)}: ${e(J)}`);return g("{",s,",","}")}function h(r){let s=[...r.values()].map(e);return g("Set {",s,",","}")}}function it(t){return/^[a-zA-Z0-9_$]+$/.test(t)?t:P(t)}function V(t){return $(t.__proto__.constructor)}function P(t){return'"'+String(t).replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/"/g,'\\"').replace(/[\x00-\x1f\x7f]/g,ut)+'"'}function ut(t){let n=t.charCodeAt(0).toString(16);return"\\x"+(n.length<2?"0"+n:n)}function x(t,n){return n.split(`
`).map(e=>e&&ct(st(t," "))(e)).join(`
`)}function st(t,n){return Array(t+1).join(n)}var ct=t=>n=>t+n;var ft=c(function(n,e){return e.slice(0,n.length)===n?e.slice(n.length):e});function pt(t){return String(t).split(/\r?\n/)}function j(t){let n=pt(t);v(E(n))&&n.shift(),v(q(n))&&n.pop();let e=/^[ \t]*/.exec(E(n))[0];return n.map(ft(e)).join(`
`)}function g(t,n,e,o){return n.length<2?t+n.join("")+o:t+`
`+x(2,n.join(e+`
`))+`
`+o}var at=A(),{getAllTests:Kt}=at;function A(){let t=[];return{test:n,getAllTests:e};function n(o,i){t.push(...Object.entries(i).map(([u,f])=>lt(o,u,f)))}function e(){return t}}function Z(t,n,...e){let o=n(...e,t);if(typeof o=="function")throw new Error("The matcher function `"+$(o)+"` returned a function instead of a boolean. You might need to pass another argument to it.");if(!o)throw new _([t,n,...e])}function lt(t,n,e){return{subject:t,scenario:n,fn:e}}var _=class extends Error{constructor(n){super("Expectation failed"),this.expectArgs=n}};var O=`

`;function U({results:t}){let n=!1,e=!1,o=[];for(let i of t){let u=!1;i.error&&(u=n=!0),i.instrumentLog.length&&(u=e=!0),u&&o.push(i)}return n?mt(o):e?ht(t.length,o):gt(t.length)}function W(t){return/fail/i.test(t)}function mt(t){return t.map(Y).join(O)+O+"Tests failed."}function gt(t){switch(t){case 0:return"No tests to run.";case 1:return"One test ran, and found no issues.";default:return`${t} tests ran, and found no issues.`}}function ht(t,n){return n.map(Y).join(O)+O+yt(t)+`, but debugging instrumentation is present.
Remove it before shipping.`}function yt(t){switch(t){case 1:return"The test passed";case 2:return"Both tests passed";default:return`All ${t} tests passed`}}function Y({test:t,error:n,instrumentLog:e}){let i=[t.subject+" "+t.scenario];return e.length&&i.push(x(2,xt(e))),n&&i.push(x(2,dt(n))),i.join(`
`)}function dt(t){return t instanceof _?_t(t):At(t)}function xt(t){return t.map(({args:n})=>G("debug",n)).join("")}function _t(t){return G("expect",t.expectArgs)}function At(t){return b(t)+" thrown"+x(2,St(t.stack))}function G(t,n){return g(t+"(",n.map(b),",",")")}function St(t){if(!t)return"";let n=j(t).split(`
`);return`
`+n.slice(0,$t(n)).map(e=>e.replace(/(file:\/\/|http:\/\/[^/]*)/,"").replace(/^([^@]*)@(.*)$/,"at $1 ($2)")).join(`
`)}function $t(t){let n=t.findIndex(e=>e.includes("errorFrom"));return n===-1?t.length:n}var H=A(),{getAllTests:jt}=H;function Ot(...t){H.test(...t)}window.Taste=I;})();
