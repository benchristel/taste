(()=>{var pt=Object.defineProperty;var at=(t,r)=>{for(var n in r)pt(t,n,{get:r[n],enumerable:!0})};var L=(t,r,n)=>new Promise((o,u)=>{var a=e=>{try{i(n.next(e))}catch(s){u(s)}},m=e=>{try{i(n.throw(e))}catch(s){u(s)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,m);i((n=n.apply(t,r)).next())});var R={};at(R,{createSuite:()=>S,curry:()=>g,debug:()=>z,equals:()=>E,expect:()=>et,formatTestResultsAsText:()=>ot,getAllTests:()=>Kt,is:()=>tt,not:()=>rt,reportsFailure:()=>ut,runTests:()=>D,test:()=>Ut,trimMargin:()=>O,which:()=>k});function D(t){return L(this,null,function*(){let r=[];for(let n of t){let o=yield lt(n.fn),u=N.map(a=>({type:"debug",args:a}));N.length=0,r.push({test:n,error:o,instrumentLog:u})}return{results:r}})}function lt(t){let r;try{let n=t();if(n instanceof Promise)return new Promise(o=>{n.then(()=>o()).catch(o)})}catch(n){r=n}return Promise.resolve(r)}var N=[];function z(...t){N.push(t)}var T=Symbol();var v=Symbol(),c=Symbol(),f=Symbol();function K(t){switch(t.length){case 2:return U(t);case 3:return mt(t);default:return gt(t)}}function U(t){function r(n,o){switch(arguments.length){case 1:return A(r,[n],t.bind(null,n));default:return t(n,o)}}return B(t,r)}function mt(t){function r(n,o,u){switch(arguments.length){case 1:return A(r,[n],U(t.bind(null,n)));case 2:return A(r,[n,o],t.bind(null,n,o));default:return t(n,o,u)}}return B(t,r)}function gt(t){function r(...n){return n.length<t.length?A(r,n,r.bind(null,...n)):t(...n)}return B(t,r)}function B(t,r){return r.displayName=V(t),r[c]=()=>[],r[f]=r,r}function A(t,r,n){return n.displayName=V(t),n[c]=()=>dt(t).concat(r),n[f]=t[f],n}function V(t){var r;return(r=t.displayName)!=null?r:t.name}function dt(t){var r;return(r=t[c]())!=null?r:[]}function g(t,r){let n=K(t);return n.displayName=r||C(t),n}function W(t){var r,n;return(n=(r=t[c])==null?void 0:r.call(t))!=null?n:[]}function C(t){return t.displayName||t.name}function Z(t){return t[t.length-1]}function F(t){return t[0]}function Y(t){switch(t.length){case 2:return G(t);case 3:return yt(t);default:return ht(t)}}function G(t){function r(n,o){switch(arguments.length){case 1:return $(r,[n],t.bind(null,n));default:return t(n,o)}}return b(t,r)}function yt(t){function r(n,o,u){switch(arguments.length){case 1:return $(r,[n],G(t.bind(null,n)));case 2:return $(r,[n,o],t.bind(null,n,o));default:return t(n,o,u)}}return b(t,r)}function ht(t){function r(...n){return n.length<t.length?$(r,n,r.bind(null,...n)):t(...n)}return b(t,r)}function b(t,r){return r.displayName=H(t),r[c]=()=>[],r[f]=r,r}function $(t,r,n){return n.displayName=H(t),n[c]=()=>xt(t).concat(r),n[f]=t[f],n}function H(t){var r;return(r=t.displayName)!=null?r:t.name}function xt(t){var r;return(r=t[c]())!=null?r:[]}var P=Y(y);function y(t,r,n){var m;let o=(m=t.override)==null?void 0:m.call(t,r,n);if(o!==void 0)return o;if(r==null||n==null)return r===n;if(typeof r[v]=="function")return!!r[v](n);if(Object.is(r,n))return!0;if(typeof r=="function"&&typeof n=="function"){let i=r[f],e=n[f];return i!=null&&i===e&&y(t,J(r),J(n))}if(typeof r!="object")return!1;let u=p(Q(r)),a=p(Q(n));if(u!==a)return!1;if(At===u)return Object.is(+r,+n);if($t===u)return String(r)===String(n);if(r instanceof Error||Ot.includes(u))return r.message===n.message;if(Array.isArray(r))return r.length===n.length&&r.every((i,e)=>y(t,r[e],n[e]));if(Et===u)return r.size===n.size&&[...r].every(i=>n.has(i));if(jt===u){if(r.size!==n.size)return!1;for(let i of r.keys())if(!n.has(i)||!y(t,r.get(i),n.get(i)))return!1;return!0}if(St===u||_(r)===_(n)){let i=Object.keys(r),e=Object.keys(n);if(i.length!==e.length)return!1;let s=new Set(e);for(let l of i)if(!s.has(l)||!y(t,r[l],n[l]))return!1;return!0}return!1}var sr=P({});function J(t){var r,n;return(n=(r=t[c])==null?void 0:r.call(t))!=null?n:t[T]}function p(t){return typeof t!="function"?"":Function.prototype.toString.call(t)}function Q(t){var r;return(r=_(t))==null?void 0:r.constructor}var _=Object.getPrototypeOf,St=p(Object),At=p(Date),$t=p(RegExp),Et=p(Set),jt=p(Map),Ot=[p(Error),p(EvalError),p(RangeError),p(ReferenceError),p(SyntaxError),p(TypeError),p(URIError)];function X(t){var r,n;return(n=(r=t[c])==null?void 0:r.call(t))!=null?n:[]}var k=g(function(t,r){return t(r)},"which"),E=P({override(t,r){if(typeof t=="function"&&t[f]===k)return X(t).length===1&&t(r)}});E.displayName="equals";E[c]=()=>[];var tt=g(function(t,r){return t===r},"is"),rt=g(function(t,r,...n){return!t(r,...n)},"not"),q=g(function(t){return/^\s*$/.test(t)},"isBlank");function j(t){return C(t)||"<function>"}function M(t){let r=[];return n(t);function n(e){var s;if(e===null)return"null";if(typeof e=="function")return o(e,u);if(typeof e=="string")return I(e);if(typeof e=="bigint")return`${e}n`;if(Array.isArray(e))return o(e,a);if(e instanceof Date)return`Date(${e.toISOString().replace("T"," ").replace("Z"," UTC")})`;if(e instanceof RegExp)return String(e);if(e instanceof Error)return`${nt(e)}(${I(e.message)})`;if(e instanceof Set)return o(e,i);if(typeof e=="object"){let l=(s=e==null?void 0:e.__proto__)==null?void 0:s.constructor;return l===Object||!l?o(e,m):`${nt(e)} ${o(e,m)}`}return String(e)}function o(e,s){if(r.indexOf(e)>-1)return"<circular reference>";r.push(e);let l=s(e);return r.pop(),l}function u(e){let s=W(e).map(n),l=j(e);return s.length?d(l+"(",s,",",")"):l}function a(e){return d("[",e.map(n),",","]")}function m(e){let s=Object.entries(e).map(([l,ft])=>`${wt(l)}: ${n(ft)}`);return d("{",s,",","}")}function i(e){let s=[...e.values()].map(n);return d("Set {",s,",","}")}}function wt(t){return/^[a-zA-Z0-9_$]+$/.test(t)?t:I(t)}function nt(t){return j(t.__proto__.constructor)}function I(t){return'"'+String(t).replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/"/g,'\\"').replace(/[\x00-\x1f\x7f]/g,Nt)+'"'}function Nt(t){let r=t.charCodeAt(0).toString(16);return"\\x"+(r.length<2?"0"+r:r)}function h(t,r){return r.split(`
`).map(n=>n&&vt(Tt(t," "))(n)).join(`
`)}function Tt(t,r){return Array(t+1).join(r)}var vt=t=>r=>t+r;var Bt=g(function(r,n){return n.slice(0,r.length)===r?n.slice(r.length):n});function Ct(t){return String(t).split(/\r?\n/)}function O(t){let r=Ct(t);q(F(r))&&r.shift(),q(Z(r))&&r.pop();let n=/^[ \t]*/.exec(F(r))[0];return r.map(Bt(n)).join(`
`)}function d(t,r,n,o){return r.length<2?t+r.join("")+o:t+`
`+h(2,r.join(n+`
`))+`
`+o}var Ft=S(),{getAllTests:Er}=Ft;function S(){let t=[];return{test:r,getAllTests:n};function r(o,u){t.push(...Object.entries(u).map(([a,m])=>bt(o,a,m)))}function n(){return t}}function et(t,r,...n){let o=r(...n,t);if(typeof o=="function")throw new Error("The matcher function `"+j(o)+"` returned a function instead of a boolean. You might need to pass another argument to it.");if(!o)throw new x([t,r,...n])}function bt(t,r,n){return{subject:t,scenario:r,fn:n}}var x=class extends Error{constructor(r){super("Expectation failed"),this.expectArgs=r}};var w=`

`;function ot({results:t}){let r=!1,n=!1,o=[];for(let u of t){let a=!1;u.error&&(a=r=!0),u.instrumentLog.length&&(a=n=!0),a&&o.push(u)}return r?_t(o):n?kt(t.length,o):Pt(t.length)}function ut(t){return/fail/i.test(t)}function _t(t){return t.map(it).join(w)+w+"Tests failed."}function Pt(t){switch(t){case 0:return"No tests to run.";case 1:return"One test ran, and found no issues.";default:return`${t} tests ran, and found no issues.`}}function kt(t,r){return r.map(it).join(w)+w+qt(t)+`, but debugging instrumentation is present.
Remove it before shipping.`}function qt(t){switch(t){case 1:return"The test passed";case 2:return"Both tests passed";default:return`All ${t} tests passed`}}function it({test:t,error:r,instrumentLog:n}){let u=[t.subject+" "+t.scenario];return n.length&&u.push(h(2,Mt(n))),r&&u.push(h(2,It(r))),u.join(`
`)}function It(t){return t instanceof x?Rt(t):Lt(t)}function Mt(t){return t.map(({args:r})=>st("debug",r)).join("")}function Rt(t){return st("expect",t.expectArgs)}function Lt(t){return M(t)+" thrown"+h(2,Dt(t.stack))}function st(t,r){return d(t+"(",r.map(M),",",")")}function Dt(t){if(!t)return"";let r=O(t).split(`
`);return`
`+r.slice(0,zt(r)).map(n=>n.replace(/(file:\/\/|http:\/\/[^/]*)/,"").replace(/^([^@]*)@(.*)$/,"at $1 ($2)")).join(`
`)}function zt(t){let r=t.findIndex(n=>n.includes("errorFrom"));return r===-1?t.length:r}var ct=S(),{getAllTests:Kt}=ct;function Ut(...t){ct.test(...t)}window.Taste=R;})();
