(()=>{var H=Object.defineProperty;var J=(t,n)=>{for(var e in n)H(t,e,{get:n[e],enumerable:!0})};var C=(t,n,e)=>new Promise((o,i)=>{var u=r=>{try{m(e.next(r))}catch(s){i(s)}},f=r=>{try{m(e.throw(r))}catch(s){i(s)}},m=r=>r.done?o(r.value):Promise.resolve(r.value).then(u,f);m((e=e.apply(t,n)).next())});var b={};J(b,{createSuite:()=>x,curry:()=>c,debug:()=>K,equals:()=>g,expect:()=>z,formatTestResultsAsText:()=>V,getAllTests:()=>dt,is:()=>B,not:()=>M,reportsFailure:()=>Z,runTests:()=>D,test:()=>_t,trimMargin:()=>A,which:()=>v});function D(t){return C(this,null,function*(){let n=[];for(let e of t){let o=yield Q(e.fn),i=j.map(u=>({type:"debug",args:u}));j.length=0,n.push({test:e,error:o,instrumentLog:i})}return{results:n}})}function Q(t){let n;try{let e=t();if(e instanceof Promise)return new Promise(o=>{e.then(()=>o()).catch(o)})}catch(e){n=e}return Promise.resolve(n)}var j=[];function K(...t){j.push(t)}var O=Symbol(),T=Symbol(),E=Symbol(),d=Symbol();function c(t,n){function e(...o){if(o.length>=t.length)return t(...o);{let i=(...u)=>e(...o,...u);return i[O]=t,i[T]=e,i[E]=o,i[d]=e[d],i}}return e[O]=t,e[T]=e,e[E]=[],e[d]=n||$(t),e}function _(t){return t[O]}function L(t){return t[T]}function a(t){return t[E]||[]}function $(t){return t[d]||t.name}function k(t){return t[t.length-1]}function w(t){return t[0]}var v=c(function(t,n){return t(n)},"which"),g=c(function(t,n){var e,o;if(X(t))return t(n);if(Array.isArray(t)&&Array.isArray(n))return t.length===n.length&&t.every((i,u)=>g(t[u],n[u]));if(t instanceof Function&&n instanceof Function)return _(t)&&_(t)===_(n)?g(a(t),a(n)):t===n;if(t instanceof Date&&n instanceof Date)return t.toISOString()===n.toISOString();if(t instanceof Set&&n instanceof Set)return t.size===n.size&&[...t.values()].every(i=>n.has(i));if(t instanceof Error&&n instanceof Error)return t.message===n.message&&t.__proto__.constructor===n.__proto__.constructor;if(q(t)&&q(n)){let i=Object.keys(t),u=Object.keys(n);return i.length===u.length&&i.every(f=>g(t[f],n[f]))&&((e=t.__proto__)==null?void 0:e.constructor)===((o=n.__proto__)==null?void 0:o.constructor)}return t===n},"equals"),B=c(function(t,n){return t===n},"is"),M=c(function(t,n,...e){return!t(n,...e)},"not"),N=c(function(t){return/^\s*$/.test(t)},"isBlank");function q(t){return!!t&&typeof t=="object"}function X(t){return t instanceof Function&&L(t)===v&&a(t).length===1}function S(t){return $(t)||"<function>"}function I(t){let n=[];return e(t);function e(r){var s;if(r===null)return"null";if(typeof r=="function")return o(r,i);if(typeof r=="string")return P(r);if(typeof r=="bigint")return`${r}n`;if(Array.isArray(r))return o(r,u);if(r instanceof Date)return`Date(${r.toISOString().replace("T"," ").replace("Z"," UTC")})`;if(r instanceof RegExp)return String(r);if(r instanceof Error)return`${R(r)}(${P(r.message)})`;if(r instanceof Set)return o(r,m);if(typeof r=="object"){let p=(s=r==null?void 0:r.__proto__)==null?void 0:s.constructor;return p===Object||!p?o(r,f):`${R(r)} ${o(r,f)}`}return String(r)}function o(r,s){if(n.indexOf(r)>-1)return"<circular reference>";n.push(r);let p=s(r);return n.pop(),p}function i(r){let s=a(r).map(e),p=S(r);return s.length?l(p+"(",s,",",")"):p}function u(r){return l("[",r.map(e),",","]")}function f(r){let s=Object.entries(r).map(([p,G])=>`${tt(p)}: ${e(G)}`);return l("{",s,",","}")}function m(r){let s=[...r.values()].map(e);return l("Set {",s,",","}")}}function tt(t){return/^[a-zA-Z0-9_$]+$/.test(t)?t:P(t)}function R(t){return S(t.__proto__.constructor)}function P(t){return'"'+String(t).replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/"/g,'\\"').replace(/[\x00-\x1f\x7f]/g,nt)+'"'}function nt(t){let n=t.charCodeAt(0).toString(16);return"\\x"+(n.length<2?"0"+n:n)}function h(t,n){return n.split(`
`).map(e=>e&&rt(et(t," "))(e)).join(`
`)}function et(t,n){return Array(t+1).join(n)}var rt=t=>n=>t+n;var ot=c(function(n,e){return e.slice(0,n.length)===n?e.slice(n.length):e});function it(t){return String(t).split(/\r?\n/)}function A(t){let n=it(t);N(w(n))&&n.shift(),N(k(n))&&n.pop();let e=/^[ \t]*/.exec(w(n))[0];return n.map(ot(e)).join(`
`)}function l(t,n,e,o){return n.length<2?t+n.join("")+o:t+`
`+h(2,n.join(e+`
`))+`
`+o}var ut=x(),{getAllTests:It}=ut;function x(){let t=[];return{test:n,getAllTests:e};function n(o,i){t.push(...Object.entries(i).map(([u,f])=>st(o,u,f)))}function e(){return t}}function z(t,n,...e){let o=n(...e,t);if(typeof o=="function")throw new Error("The matcher function `"+S(o)+"` returned a function instead of a boolean. You might need to pass another argument to it.");if(!o)throw new y([t,n,...e])}function st(t,n,e){return{subject:t,scenario:n,fn:e}}var y=class extends Error{constructor(n){super("Expectation failed"),this.expectArgs=n}};var F=`

`;function V({results:t}){let n=!1,e=!1,o=[];for(let i of t){let u=!1;i.error&&(u=n=!0),i.instrumentLog.length&&(u=e=!0),u&&o.push(i)}return n?ct(o):e?pt(t.length,o):ft(t.length)}function Z(t){return/fail/i.test(t)}function ct(t){return t.map(U).join(F)+F+"Tests failed."}function ft(t){switch(t){case 0:return"No tests to run.";case 1:return"One test ran, and found no issues.";default:return`${t} tests ran, and found no issues.`}}function pt(t,n){return n.map(U).join(F)+F+at(t)+`, but debugging instrumentation is present.
Remove it before shipping.`}function at(t){switch(t){case 1:return"The test passed";case 2:return"Both tests passed";default:return`All ${t} tests passed`}}function U({test:t,error:n,instrumentLog:e}){let i=[t.subject+" "+t.scenario];return e.length&&i.push(h(2,mt(e))),n&&i.push(h(2,lt(n))),i.join(`
`)}function lt(t){return t instanceof y?gt(t):ht(t)}function mt(t){return t.map(({args:n})=>W("debug",n)).join("")}function gt(t){return W("expect",t.expectArgs)}function ht(t){return I(t)+" thrown"+h(2,yt(t.stack))}function W(t,n){return l(t+"(",n.map(I),",",")")}function yt(t){if(!t)return"";let n=A(t).split(`
`);return`
`+n.slice(0,xt(n)).map(e=>e.replace(/(file:\/\/|http:\/\/[^/]*)/,"").replace(/^([^@]*)@(.*)$/,"at $1 ($2)")).join(`
`)}function xt(t){let n=t.findIndex(e=>e.includes("errorFrom"));return n===-1?t.length:n}var Y=x(),{getAllTests:dt}=Y;function _t(...t){Y.test(...t)}window.Taste=b;})();
